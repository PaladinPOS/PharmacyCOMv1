<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="PharmacyCOMv1 : PaladinPOS Pharmacy Communication Integration Definition" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>PharmacyCOMv1</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/PaladinPOS/PharmacyCOMv1">View on GitHub</a>

          <h1 id="project_title">PharmacyCOMv1</h1>
          <h2 id="project_tagline">PaladinPOS Pharmacy Communication Integration Definition</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/PaladinPOS/PharmacyCOMv1/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/PaladinPOS/PharmacyCOMv1/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="about" class="anchor" href="#about"><span class="octicon octicon-link"></span></a>ABOUT</h1>

<p>Paladin Data Corporation is providing a way for pharmacy systems to communicate with the Paladin POS system. This will enable pharmacy systems to utilize the Paladin POS GUI front end while retaining their current system and business function. 
Pharmacy systems just need to implement a simple SOAP-based webservice in order to allow Paladin POS to communicate with your system. </p>

<h1>
<a name="webservice-methods" class="anchor" href="#webservice-methods"><span class="octicon octicon-link"></span></a>WEBSERVICE METHODS</h1>

<p>The webservice should provide the following methods to Paladin POS:</p>

<ul>
<li>GetRxItem(rxNumber) </li>
<li>SaveRxInvoice(rxInvoice) – Allows Paladin POS to inform the pharmacy system of the sale of specific RxItems.</li>
<li>GetAvailableCredit(customerId) – Allows Paladin POS to query the pharmacy system for a specific customer id, returning the amount of available credit the customer has available as well as the total account balance for the account. </li>
<li>SaveInvoice(invoice) – Allows Paladin POS to send an entire invoice to the pharmacy system. Invoice contains all from paladin system. Invoice is sent regardless of any pharmacy items are on the invoice. </li>
</ul><h2>
<a name="getrxitem-method" class="anchor" href="#getrxitem-method"><span class="octicon octicon-link"></span></a>GetRxItem Method</h2>

<p>Allows Paladin POS to query the pharmacy system for a specific Rx number. During checkout, Paladin POS will call the pharmacy webservice GetRxItem in order to try to find the part number entered into the system. The pharmacy service implementation should respond back to paladin indicating that the item was invalid (not found) or valid (found). </p>

<h3>
<a name="getrxitem-request" class="anchor" href="#getrxitem-request"><span class="octicon octicon-link"></span></a>GetRxItem Request</h3>

<h3>
<a name="getrxitem-response" class="anchor" href="#getrxitem-response"><span class="octicon octicon-link"></span></a>GetRxItem Response</h3>

<p>If an Rx number is invalid, the webservice should return an RxItem containing the following values:</p>

<ul>
<li>RxNumber - The original Rx Number that was passed into the webservice call</li>
<li>RxValid - Set to “false”</li>
<li>RxMessages - Containing any number of <em>RxMessage</em> entries

<ul>
<li>Message - <em>Attribute</em> - Text for why item was invalid (ie. Not found, etc…)</li>
<li>Print - <em>Attribute</em> - Print message “true” or “false”. Attribute value ignored</li>
</ul>
</li>
</ul><p><strong><em>All other elements are ignored/missing</em></strong></p>

<h4>
<a name="example---rxitem-invalid" class="anchor" href="#example---rxitem-invalid"><span class="octicon octicon-link"></span></a>Example - RxItem Invalid</h4>

<div class="highlight highlight-xml"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;RxItem</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xmlns:xsd=</span><span class="s">"http://www.w3.org/2001/XMLSchema"</span> <span class="na">xmlns=</span><span class="s">"http://services.Paladin POS.com/PaladinPharmacyCOMv1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;RxNumber&gt;</span>Test Invalid Rx Item 1<span class="nt">&lt;/RxNumber&gt;</span>
  <span class="nt">&lt;RxValid&gt;</span>false<span class="nt">&lt;/RxValid&gt;</span>
  <span class="nt">&lt;RxAmountDue&gt;</span>0<span class="nt">&lt;/RxAmountDue&gt;</span>
  <span class="nt">&lt;RxMessages&gt;</span>
    <span class="nt">&lt;RxMessage</span> <span class="na">Message=</span><span class="s">"Item does not exist in the system!"</span> <span class="na">Print=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/RxMessages&gt;</span>
  <span class="nt">&lt;RxItemFlags</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/RxItem&gt;</span>
</pre></div>

<p>If an Rx number is valid, the webservice should return an RxItem containing the following values:</p>

<ul>
<li>  RxNumber - The original Rx Number that was passed into the webservice call</li>
<li>  RxValid - Set to “true”</li>
<li>  RxCustomerName - Full name of customer on prescription</li>
<li>  RxCustomerFName - <em>optional</em> - Customer first name</li>
<li>  RxCustomerMName - <em>optional</em> - Customer middle name</li>
<li>  RxCustomerLName - <em>optional</em> - Customer last name</li>
<li>  RxPatientID - <em>optional</em> - Customer ID from pharmacy system</li>
<li>  RxCustomerPhone1 - <em>optional</em> - Customer phone number</li>
<li>  RxCustomerRegAddress1 - <em>optional</em> - Customer address line 1</li>
<li>  RxCustomerRegAddress2 - <em>optional</em> - Customer address line 2</li>
<li>  RxCustomerRegCity - <em>optional</em> - Customer city</li>
<li>  RxCustomerRegState - <em>optional</em> - Customer state</li>
<li>  RxCustomerRegZIP - <em>optional</em> - Customer zip</li>
<li>  RxAmountDue - Total price to charge customer for item.</li>
<li>  RxTaxable - Charge tax for this item. “true” or “false”.</li>
<li>  RxMessages - Containing any number of RxMessage entries.

<ul>
<li> Message - <em>Attribute</em> - Text for message. Up to 62 characters per message.</li>
<li> Print - <em>Attribute</em> - Print message on receipt (“true” or “false”).</li>
</ul>
</li>
<li>  RxItemFlags - Containing any number of valid RxItemFlag entries.

<ul>
<li> Type - <em>Attribute</em> - Flag type numerical value. 

<ul>
<li>  Type 1 – HIPPA agreement.</li>
<li>  Type 2 – Safety cap agreement.</li>
<li>  Type 3 – Pharmacy consult offered</li>
</ul>
</li>
<li> Message - <em>Attribute</em> - Message (if applicable) associated with flag.</li>
<li> Required - <em>Attribute</em> - Client flag condition is required to be accepted.</li>
</ul>
</li>
</ul><h4>
<a name="example---rxitem-valid" class="anchor" href="#example---rxitem-valid"><span class="octicon octicon-link"></span></a>Example - RxItem Valid</h4>

<div class="highlight highlight-xml"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;RxItem</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xmlns:xsd=</span><span class="s">"http://www.w3.org/2001/XMLSchema"</span> <span class="na">xmlns=</span><span class="s">"http://services.Paladin POS.com/PaladinPharmacyCOMv1"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;RxNumber&gt;</span>123456789<span class="nt">&lt;/RxNumber&gt;</span>
    <span class="nt">&lt;RxValid&gt;</span>true<span class="nt">&lt;/RxValid&gt;</span>
    <span class="nt">&lt;RxCustomerName&gt;</span>Test Customer<span class="nt">&lt;/RxCustomerName&gt;</span>
    <span class="nt">&lt;RxPatientID&gt;</span>111222333444555666<span class="nt">&lt;/RxPatientID&gt;</span>
    <span class="nt">&lt;RxAmountDue&gt;</span>50.00<span class="nt">&lt;/RxAmountDue&gt;</span>
    <span class="nt">&lt;RxTaxable&gt;</span>true<span class="nt">&lt;/RxTaxable&gt;</span>
    <span class="nt">&lt;RxMessages&gt;</span>
      <span class="nt">&lt;RxMessage</span> <span class="na">Message=</span><span class="s">"This item is a screen only message"</span> <span class="na">Print=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;RxMessage</span> <span class="na">Message=</span><span class="s">"This message is for everyone!"</span> <span class="na">Print=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/RxMessages&gt;</span>
    <span class="nt">&lt;RxItemFlags&gt;</span>
      <span class="nt">&lt;RxItemFlag</span> <span class="na">Type=</span><span class="s">"1"</span> <span class="na">Message=</span><span class="s">"HIPPA First Time Signature"</span> <span class="na">Required=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;RxItemFlag</span> <span class="na">Type=</span><span class="s">"2"</span> <span class="na">Message=</span><span class="s">"No Safety Cap on Rx"</span> <span class="na">Required=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;RxItemFlag</span> <span class="na">Type=</span><span class="s">"3"</span> <span class="na">Message=</span><span class="s">"Need Pharmacist Consult"</span> <span class="na">Required=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/RxItemFlags&gt;</span>
<span class="nt">&lt;/RxItem&gt;</span>
</pre></div>

<h2>
<a name="saverxinvoice-method" class="anchor" href="#saverxinvoice-method"><span class="octicon octicon-link"></span></a>SaveRxInvoice Method</h2>

<p>When an invoice is completed in Paladin POS that contains RxItems, Paladin POS will return an RxInvoice containing basic invoice details as well as all of the RxItems that were sold as part of the transaction. 
An RxInvoice contains the following values:</p>

<ul>
<li>RxInvoiceNumber - Invoice number from Paladin POS</li>
<li>RxInvoiceDate - Date and time of the invoice transaction</li>
<li>RxSubTotal - Subtotal of all items on the invoice

<ul>
<li><em>Note: Value can include non-pharmacy items</em></li>
</ul>
</li>
<li>RxTaxTotal - Amount of tax changed on the invoice items

<ul>
<li><em>Note: Value can include non-pharmacy items</em></li>
</ul>
</li>
<li>RxTotal - Total amount changed on the invoice. 

<ul>
<li>_Note: Value is same as RxSubTotal + RxTaxTotal</li>
</ul>
</li>
<li>RxItems - Containing any number of RxItem entries

<ul>
<li>RxNumber - Rx Number on invoice</li>
<li>RxValid - Set to “true”</li>
<li>RxCustomerName - Name of customer</li>
<li>RxAmountDue - Amount collected for item</li>
<li><strong><em>All other elements should be ignored or empty</em></strong></li>
</ul>
</li>
<li>RxPayments - Containing any number of RxPayment entries

<ul>
<li>Type - <em>Attribute</em> - Type of invoice payment. Values:

<ul>
<li>1 - Cash</li>
<li>2 - Charge</li>
<li>3 - Credit Card</li>
<li>4 - Check</li>
<li>5 - Coupon</li>
<li>6 - [Reserved]</li>
<li>7 - [Reserved]</li>
<li>8 - Change</li>
<li>9 - ROA Cash</li>
<li>10 - Discount</li>
<li>11 - ROA Credit Card</li>
<li>12 - ROA Check</li>
<li>13 - ROA Change</li>
<li>14 - Cash Paid-Out</li>
<li>15 - [Reserved]</li>
<li>16 - Cash Drop</li>
<li>17 - Instant Savings Coupons (ACE)</li>
<li>18 - Dynamic Promotions Coupons (ACE)</li>
</ul>
</li>
<li>Amount - <em>Attribute</em> - Amount paid for payment type</li>
<li>Message - <em>Attribute</em> - Additional payment type information/notes</li>
</ul>
</li>
<li>RxItemFlagResults - Containing any number of RxItemFlagResult entries

<ul>
<li>CustomerName - <em>Attribute</em> - Name of customer flag applied to</li>
<li>Type - <em>Attribute</em> - Flag type</li>
<li>Accepted - <em>Attribute</em> - Accepted by customer, “true” or “false”</li>
</ul>
</li>
<li>Signature - Base64 encoding of JPEG signature. If not accepted, element will be empty/missing</li>
</ul><h4>
<a name="example--rxinvoice" class="anchor" href="#example--rxinvoice"><span class="octicon octicon-link"></span></a>Example – RxInvoice</h4>

<div class="highlight highlight-xml"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;RxInvoice</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xmlns:xsd=</span><span class="s">"http://www.w3.org/2001/XMLSchema"</span> <span class="na">xmlns=</span><span class="s">"http://services.Paladin POS.com/PaladinPharmacyCOMv1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;RxInvoiceNumber&gt;</span>9201923<span class="nt">&lt;/RxInvoiceNumber&gt;</span>
  <span class="nt">&lt;RxInvoiceDate&gt;</span>2008-03-03T10:17:33.578125-08:00<span class="nt">&lt;/RxInvoiceDate&gt;</span>
  <span class="nt">&lt;RxSubTotal&gt;</span>125.99<span class="nt">&lt;/RxSubTotal&gt;</span>
  <span class="nt">&lt;RxTaxTotal&gt;</span>7.24<span class="nt">&lt;/RxTaxTotal&gt;</span>
  <span class="nt">&lt;RxTotal&gt;</span>133.23<span class="nt">&lt;/RxTotal&gt;</span>
  <span class="nt">&lt;RxItems&gt;</span>
    <span class="nt">&lt;RxItem&gt;</span>
      <span class="nt">&lt;RxNumber&gt;</span>TEST RX NUMBER<span class="nt">&lt;/RxNumber&gt;</span>
      <span class="nt">&lt;RxValid&gt;</span>true<span class="nt">&lt;/RxValid&gt;</span>
      <span class="nt">&lt;RxCustomerName&gt;</span>Test Customer 1<span class="nt">&lt;/RxCustomerName&gt;</span>
      <span class="nt">&lt;RxAmountDue&gt;</span>50.00<span class="nt">&lt;/RxAmountDue&gt;</span>
      <span class="nt">&lt;RxTaxable&gt;</span>false<span class="nt">&lt;/RxTaxable&gt;</span>
      <span class="nt">&lt;RxMessages</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;RxItemFlags</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/RxItem&gt;</span>
    <span class="nt">&lt;RxItem&gt;</span>
      <span class="nt">&lt;RxNumber&gt;</span>OTHER RX NUMBER<span class="nt">&lt;/RxNumber&gt;</span>
      <span class="nt">&lt;RxValid&gt;</span>true<span class="nt">&lt;/RxValid&gt;</span>
      <span class="nt">&lt;RxCustomerName&gt;</span>Test Customer 1<span class="nt">&lt;/RxCustomerName&gt;</span>
      <span class="nt">&lt;RxAmountDue&gt;</span>50.00<span class="nt">&lt;/RxAmountDue&gt;</span>
      <span class="nt">&lt;RxTaxable&gt;</span>false<span class="nt">&lt;/RxTaxable&gt;</span>
      <span class="nt">&lt;RxMessages</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;RxItemFlags</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/RxItem&gt;</span>
  <span class="nt">&lt;/RxItems&gt;</span>
  <span class="nt">&lt;RxPayments&gt;</span>
    <span class="nt">&lt;RxPayment</span> <span class="na">Type=</span><span class="s">"1"</span> <span class="na">Amount=</span><span class="s">"20.25"</span> <span class="na">Message=</span><span class="s">"Cash"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/RxPayments&gt;</span>
  <span class="nt">&lt;RxItemFlagResults&gt;</span>
    <span class="nt">&lt;RxItemFlagResult</span> <span class="na">CustomerName=</span><span class="s">"Test Customer 1"</span> <span class="na">Type=</span><span class="s">"1"</span> <span class="na">Accepted=</span><span class="s">"true"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;Signature&gt;</span>/9j/4AAQSkZJRgigD/9k=<span class="nt">&lt;/Signature&gt;</span>
    <span class="nt">&lt;/RxItemFlagResult&gt;</span>
    <span class="nt">&lt;RxItemFlagResult</span> <span class="na">CustomerName=</span><span class="s">"Test Customer 1"</span> <span class="na">Type=</span><span class="s">"2"</span> <span class="na">Accepted=</span><span class="s">"true"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;Signature&gt;</span>/9j/4AAQSkZJRgABQB//Z<span class="nt">&lt;/Signature&gt;</span>
    <span class="nt">&lt;/RxItemFlagResult&gt;</span>
    <span class="nt">&lt;RxItemFlagResult</span> <span class="na">CustomerName=</span><span class="s">"Test Customer 1"</span> <span class="na">Type=</span><span class="s">"3"</span> <span class="na">Accepted=</span><span class="s">"true"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;Signature&gt;</span>/9j/KKAKKKACiiigD/9k=<span class="nt">&lt;/Signature&gt;</span>
    <span class="nt">&lt;/RxItemFlagResult&gt;</span>
  <span class="nt">&lt;/RxItemFlagResults&gt;</span>
<span class="nt">&lt;/RxInvoice&gt;</span>
</pre></div>

<p><strong><em>Signature values shortened for example</em></strong></p>

<h2>
<a name="getavailablecredit-method" class="anchor" href="#getavailablecredit-method"><span class="octicon octicon-link"></span></a>GetAvailableCredit Method</h2>

<p><strong><em>Note: Added v1.04. 
Method is only called when option “Enable Customer Available Credit” is enabled within Paladin POS. This option disables AR in Paladin POS to be managed solely by the pharmacy system.</em></strong></p>

<p>When an invoice customer is changed within the system, a request for that customer’s available credit will be made. The response from the pharmacy system will determine if a customer can charge to their store credit account maintained by the pharmacy system.</p>

<h3>
<a name="getavailablecredit-request" class="anchor" href="#getavailablecredit-request"><span class="octicon octicon-link"></span></a>GetAvailableCredit Request</h3>

<p>When enabled, Paladin POS will call GetAvailableCredit on pharmacy system using the customer’s pharmacy system id.</p>

<h4>
<a name="example---getavailablecredit-request" class="anchor" href="#example---getavailablecredit-request"><span class="octicon octicon-link"></span></a>Example - GetAvailableCredit Request</h4>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;GetAvailableCredit</span> <span class="na">xmlns=</span><span class="s">"http://services.paladinpos.com/PaladinPharmacyCOMv1"</span><span class="nt">&gt;</span> 
  <span class="nt">&lt;customerId&gt;</span>111222333444555666<span class="nt">&lt;/customerId&gt;</span> 
<span class="nt">&lt;/GetAvailableCredit&gt;</span>
</pre></div>

<h3>
<a name="getavailablecredit-response" class="anchor" href="#getavailablecredit-response"><span class="octicon octicon-link"></span></a>GetAvailableCredit Response</h3>

<p>The pharmacy system should return a AvailableCreditResponse message back to Paladin POS. The response from the pharmacy should specify if the customer lookup was successful and/or if the customer has any credit to allow charging locally.
As of version 1.05, the available credit response also returns the account balance to allow paladin to display current account information and accept payment on customer accounts on behalf of the pharmacy system.</p>

<p>The AvailableCreditResponse message contains: </p>

<ul>
<li>CustomerId - The customer id found in the pharmacy system, should match value sent in the original request</li>
<li>IsValid - “true” or “false”, valid customer found by the pharmacy system</li>
<li>Message - Any messages/errors returned by the pharmacy system</li>
<li>AvailableCredit - Customer available credit in pharmacy system

<ul>
<li><em>Note: AvailableCredit must be greater than zero to allow Paladin POS to charge to their accounts</em></li>
<li><em>Note: Paladin POS will only allow customers to charge up to the maximum value specified by AvailableCredit</em></li>
</ul>
</li>
<li>AccountBalance - <strong><em>Added v.1.05</em></strong> -  Customer total account balance owed 

<ul>
<li><em>Note: If account has a credit balance, AccountBalance should be return a negative value</em></li>
</ul>
</li>
</ul><h4>
<a name="example--availablecreditresponse-invalid" class="anchor" href="#example--availablecreditresponse-invalid"><span class="octicon octicon-link"></span></a>Example – AvailableCreditResponse Invalid</h4>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;AvailableCreditResponse&gt;</span> 
  <span class="nt">&lt;CustomerId&gt;</span>111222333444555666<span class="nt">&lt;/CustomerId&gt;</span> 
  <span class="nt">&lt;IsValid&gt;</span>false<span class="nt">&lt;/IsValid&gt;</span> 
  <span class="nt">&lt;Message&gt;</span>Customer not found<span class="nt">&lt;/Message&gt;</span> 
  <span class="nt">&lt;AvailableCredit&gt;</span>0<span class="nt">&lt;/AvailableCredit&gt;</span> 
  <span class="nt">&lt;AccountBalance&gt;</span>0<span class="nt">&lt;/AccountBalance&gt;</span> 
<span class="nt">&lt;/AvailableCreditResponse&gt;</span> 
</pre></div>

<h4>
<a name="example--availablecreditresponse-valid" class="anchor" href="#example--availablecreditresponse-valid"><span class="octicon octicon-link"></span></a>Example – AvailableCreditResponse Valid</h4>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;AvailableCreditResponse&gt;</span> 
  <span class="nt">&lt;CustomerId&gt;</span>111222333444555666<span class="nt">&lt;/CustomerId&gt;</span> 
  <span class="nt">&lt;IsValid&gt;</span>true<span class="nt">&lt;/IsValid&gt;</span> 
  <span class="nt">&lt;Message&gt;</span>success<span class="nt">&lt;/Message&gt;</span> 
  <span class="nt">&lt;AvailableCredit&gt;</span>213.35<span class="nt">&lt;/AvailableCredit&gt;</span> 
  <span class="nt">&lt;AccountBalance&gt;</span>100.00<span class="nt">&lt;/AccountBalance&gt;</span> 
<span class="nt">&lt;/AvailableCreditResponse&gt;</span> 
</pre></div>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">PharmacyCOMv1 maintained by <a href="https://github.com/PaladinPOS">PaladinPOS</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
